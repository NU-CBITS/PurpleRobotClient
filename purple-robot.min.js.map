{"version":3,"file":"purple-robot.min.js","sources":["purple-robot.js"],"names":["PR","options","this","className","_serverUrl","serverUrl","_script","script","PurpleRobotArgumentException","methodName","argument","expectedArgument","message","toString","join","q","value","apiVersion","setEnvironment","env","prototype","toStringExpression","toJson","JSON","stringify","execute","callbacks","onChange","httpRequest","readyState","XMLHttpRequest","DONE","response","fail","done","parse","payload","json","command","onreadystatechange","isAsynchronous","open","setRequestHeader","send","console","log","save","localStorage","prQueue","restore","destroy","isEqual","valA","valB","expr","_stringify","trim","ifThenElse","condition","thenStmt","elseStmt","doNothing","addNamespace","namespace","_push","broadcastIntent","action","cancelScriptNotification","clearNativeDialogs","tag","clearTriggers","dateFromTimestamp","epoch","deleteTrigger","id","disableEachProbe","disableProbes","disableTrigger","emitReading","name","emitToast","hasLongDuration","enableProbes","enableTrigger","fetchConfig","fetchEncryptedString","key","fetchNamespace","fetchNamespaces","fetchTrigger","fetchTriggerIds","fetchUserId","fetchWidget","fireTrigger","formatDate","error","getUploadUrl","launchApplication","launchInternalUrl","url","launchUrl","loadLibrary","models","Error","now","packageForApplicationName","applicationName","parseDate","persistEncryptedString","persistString","playDefaultTone","loops","playTone","tone","predictions","readings","readUrl","resetTrigger","runScript","scheduleScript","minutes","timestampStr","setUploadUrl","setUserId","showApplicationLaunchNotification","showNativeDialog","args","title","buttonLabelA","buttonLabelB","scriptA","scriptB","undefined","priority","concat","showScriptNotification","isPersistent","isSticky","stopPlayback","updateConfig","updateConfigUrl","updateProbe","updateTrigger","date","formatYear","getFullYear","formatMonth","parseInt","getMonth","slice","formatDays","getDate","formatHours","getHours","formatMinutes","getMinutes","formatSeconds","getSeconds","timestamp","Date","getTime","triggerId","triggerJson","type","identifier","datetime_start","startAt","datetime_end","endAt","datetime_repeat","repeatRule","datetime_random","random","fire_on_boot","updateWidget","version","vibrate","pattern","repeats","widgets","argStr","nextScript","str","window","PurpleRobot"],"mappings":"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"}