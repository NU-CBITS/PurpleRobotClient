{"version":3,"file":"purple-robot.min.js","sources":["purple-robot.js"],"names":["PR","options","this","className","_serverUrl","serverUrl","_script","script","PurpleRobotArgumentException","methodName","argument","expectedArgument","message","toString","join","q","value","apiVersion","setEnvironment","env","prototype","toStringExpression","toJson","JSON","stringify","execute","callbacks","onChange","httpRequest","readyState","XMLHttpRequest","DONE","response","fail","done","parse","payload","json","command","onreadystatechange","isAsynchronous","open","setRequestHeader","send","console","log","save","localStorage","prQueue","restore","destroy","isEqual","valA","valB","expr","_stringify","trim","ifThenElse","condition","thenStmt","elseStmt","doNothing","addNamespace","namespace","_push","broadcastIntent","action","cancelScriptNotification","clearNativeDialogs","tag","clearTriggers","dateFromTimestamp","epoch","deleteTrigger","id","disableEachProbe","disableProbes","disableTrigger","emitReading","name","emitToast","hasLongDuration","enableProbes","enableTrigger","fetchConfig","fetchEncryptedString","key","fetchNamespace","fetchNamespaces","fetchTrigger","fetchTriggerIds","fetchUserId","fetchWidget","fireTrigger","formatDate","error","launchApplication","launchInternalUrl","url","launchUrl","loadLibrary","models","Error","now","packageForApplicationName","applicationName","parseDate","persistEncryptedString","persistString","playDefaultTone","playTone","tone","predictions","readings","readUrl","resetTrigger","runScript","scheduleScript","minutes","timestampStr","setUserId","showApplicationLaunchNotification","showNativeDialog","priority","title","buttonLabelA","buttonLabelB","scriptA","scriptB","showScriptNotification","isPersistent","isSticky","updateConfig","updateConfigUrl","updateProbe","updateTrigger","date","formatYear","getFullYear","formatMonth","parseInt","getMonth","slice","formatDays","getDate","formatHours","getHours","formatMinutes","getMinutes","formatSeconds","getSeconds","timestamp","Date","getTime","triggerId","triggerJson","type","identifier","datetime_start","startAt","datetime_end","endAt","datetime_repeat","repeatRule","fire_on_boot","updateWidget","version","vibrate","pattern","widgets","argStr","nextScript","str","window","PurpleRobot"],"mappings":"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"}